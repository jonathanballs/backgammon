{
    "app-id": "uk.jnthn.backgammon",
    "runtime": "org.gnome.Platform",
    "runtime-version": "3.34",
    "sdk": "org.gnome.Sdk",
    "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.dmd"
    ],
    "command": "backgammon",
    "modules": [
        {
            "name": "gnubg",
            "buildsystem": "simple",
            "build-commands": [
                "./configure",
                "make",
                "install -D gnubg /app/bin/gnubg"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "ftp://ftp.gnu.org/gnu/gnubg/gnubg-release-1.06.002-sources.tar.gz",
                    "sha256": "ce1b0b0c1900717cc598032a14cf8c0ee60faf24d84368b39922c0102983bc87"
                }
            ]
        },
        {
            "name": "backgammon",
            "buildsystem": "simple",
            "build-options": {
                "append-path": "/usr/lib/sdk/dmd/bin",
                "build-args": ["--share=network"]
            },
            "build-commands": [
                "dub build",
                "install -D backgammon /app/bin/backgammon",
                "install -d \"/app/share/applications\"",
                "install -D resources/linux/uk.jnthn.backgammon.desktop /app/share/applications",
                "install -d \"/app/share/icons/hicolor/512x512/apps\"",
                "install -D resources/icon.png /app/share/icons/hicolor/512x512/apps/uk.jnthn.backgammon.png"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/jonathanballs/backgammon.git",
                    "branch": "master"
                }
            ]
        }
    ],
    "finish-args": [
        "--socket=x11",
        "--socket=wayland",
        "--share=ipc",
        "--share=network",
        "--device=dri"
    ]
}
